<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>معرض شركة باب الآغا</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&display=swap" rel="stylesheet" />
  <style>
    :root {
      --main-color: #5c2e00;
      --bg-color: #fffaf0;
      --text-color: #222;
      --font-family: 'Cairo', sans-serif;
    }

    body {
      margin: 0;
      font-family: var(--font-family);
      background-color: var(--bg-color);
      color: var(--text-color);
      line-height: 1.8;
    }

    /* --- بداية الشريط العلوي الموحد --- */
    header {
      background-color: var(--main-color);
      color: white;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 25px;
      flex-wrap: wrap;
      direction: rtl;
      position: fixed;
      width: 100%;
      box-sizing: border-box;
      top: 0;
      left: 0;
      z-index: 999;
      transform: translateY(0);
      transition: transform 0.3s ease;
    }
    header.hidden {
      transform: translateY(-100%);
    }

    header .logo-link {
      display: inline-block;
      order: 1;
    }

    header img.logo {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      object-fit: cover;
      vertical-align: middle;
    }

    header h1 {
      margin: 0;
      font-size: 22px;
      font-weight: 700;
      white-space: nowrap;
      order: 2;
      flex-grow: 1;
      margin-right: 15px;
    }

    header h1 a {
      color: white;
      text-decoration: none;
    }

    nav.main-nav {
      order: 3;
      display: flex;
      gap: 25px;
      align-items: center;
      font-weight: 600;
      font-size: 18px;
    }

    nav.main-nav a {
      color: white;
      text-decoration: none;
      padding: 8px 12px;
      border-radius: 6px;
      transition: background-color 0.3s ease;
    }

    nav.main-nav a:hover,
    nav.main-nav a.active {
      background-color: rgba(255, 255, 255, 0.2);
    }

    .menu-toggle {
      display: none;
      flex-direction: column;
      justify-content: space-between;
      width: 30px;
      height: 21px;
      cursor: pointer;
      order: 4;
      background: none;
      border: none;
    }

    .menu-toggle span {
      display: block;
      height: 3px;
      background-color: white;
      border-radius: 2px;
    }

    nav.mobile-nav {
      display: none;
      flex-direction: column;
      background-color: var(--main-color);
      position: absolute;
      top: 84px;
      left: 0;
      width: 100%;
      z-index: 10;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }

    nav.mobile-nav a {
      color: white;
      padding: 15px 25px;
      text-decoration: none;
      border-top: 1px solid rgba(255, 255, 255, 0.2);
      font-weight: 600;
    }

    nav.mobile-nav a:hover {
      background-color: rgba(255, 255, 255, 0.2);
    }

    .mobile-nav.show {
      display: flex;
    }

    @media (max-width: 768px) {
        header {
            justify-content: space-between;
        }
        header h1 {
            flex-grow: 0;
            margin-right: 10px;
        }
        nav.main-nav {
            display: none;
        }
        .menu-toggle {
            display: flex;
        }
    }
    /* --- نهاية الشريط العلوي الموحد --- */

    main {
      max-width: 1200px;
      margin: 40px auto;
      padding: 0 15px;
      margin-top: 124px;
    }

    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
    }

    .gallery-item {
      cursor: pointer;
      overflow: hidden;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      position: relative;
      background: none;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .gallery-item:hover,
    .gallery-item:focus-visible {
      transform: scale(1.05);
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
      outline: none;
      z-index: 2;
    }

    .gallery-item img,
    .gallery-item video {
      width: 100%;
      height: 180px;
      object-fit: cover;
      display: block;
      border-radius: 12px;
      user-select: none;
    }

    .lightbox {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.85);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      padding: 15px;
      direction: rtl;
    }

    .lightbox.active {
      display: flex;
    }

    .lightbox-content {
      max-width: 90vw;
      max-height: 85vh;
      position: relative;
      outline: none;
    }

    .lightbox-content img,
    .lightbox-content video {
      max-width: 100%;
      max-height: 85vh;
      border-radius: 12px;
      display: block;
    }

    .lightbox-close {
      position: absolute;
      top: 8px;
      left: 12px;
      right: auto;
      font-size: 30px;
      color: white;
      cursor: pointer;
      user-select: none;
      background: rgba(0,0,0,0.5);
      border-radius: 50%;
      width: 38px;
      height: 38px;
      line-height: 38px;
      text-align: center;
      transition: background-color 0.3s ease;
      z-index: 10;
    }
    .lightbox-close:hover {
      background: rgba(255,255,255,0.8);
      color: black;
    }
  </style>
</head>
<body>

<header id="header">
  <a href="index.html" class="logo-link" aria-label="الرئيسية">
    <img src="logo.jpeg" alt="شعار باب الآغا" class="logo" />
  </a>
  <h1>
    <a href="index.html">شركة باب الآغا</a>
  </h1>

  <nav class="main-nav">
    <a href="index.html">الصفحة الرئيسية</a>
    <a href="gall.html" class="active">المعرض</a>
  </nav>

  <button class="menu-toggle" id="menuToggle" aria-label="فتح القائمة" aria-expanded="false" aria-controls="mobileNav" role="button" tabindex="0">
    <span></span>
    <span></span>
    <span></span>
  </button>

  <nav class="mobile-nav" id="mobileNav">
    <a href="index.html">الصفحة الرئيسية</a>
    <a href="gall.html">المعرض</a>
  </nav>
</header>

<main>
    <div class="gallery" id="gallery">
      <!-- المعرض سيتم ملؤه بواسطة جافاسكريبت -->
    </div>
</main>

<div class="lightbox" id="lightbox" tabindex="-1" role="dialog" aria-modal="true" aria-labelledby="lightboxLabel">
    <div class="lightbox-content" id="lightboxContent" tabindex="0">
      <button class="lightbox-close" id="lightboxClose" aria-label="إغلاق المعرض">×</button>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const menuToggle = document.getElementById('menuToggle');
  const mobileNav = document.getElementById('mobileNav');
  const header = document.getElementById('header');

  if (menuToggle && mobileNav) {
    menuToggle.addEventListener('click', () => {
      mobileNav.classList.toggle('show');
      const isExpanded = mobileNav.classList.contains('show');
      menuToggle.setAttribute('aria-expanded', isExpanded);
    });
  }

  let lastScrollTop = 0;
  if (header) {
    window.addEventListener('scroll', function() {
      let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
      if (scrollTop > lastScrollTop && scrollTop > header.offsetHeight) {
        header.classList.add('hidden');
      } else {
        header.classList.remove('hidden');
      }
      lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
    }, false);
  }

  const mp4Files = [
      'mp4/1.mp4', 'mp4/2.mp4', 'mp4/3.mp4'
  ];
  const jpgFiles = [
      'jpg/1.jpg', 'jpg/2.jpg', 'jpg/3.jpg', 'jpg/4.jpg', 'jpg/5.jpg'
  ];

  const gallery = document.getElementById('gallery');
  const lightbox = document.getElementById('lightbox');
  const lightboxContent = document.getElementById('lightboxContent');
  const lightboxClose = document.getElementById('lightboxClose');

  if (gallery) {
    function createGalleryItem(src, isVideo) {
        const item = document.createElement('div');
        item.className = 'gallery-item';
        item.tabIndex = 0;
        item.setAttribute('role', 'button');
        item.setAttribute('aria-label', isVideo ? 'فتح فيديو في المعرض' : 'فتح صورة في المعرض');

        if (isVideo) {
            const video = document.createElement('video');
            video.src = src;
            video.muted = true;
            video.loop = true;
            video.autoplay = true;
            video.playsInline = true;
            video.setAttribute('aria-hidden', 'true');
            item.appendChild(video);
        } else {
            const img = document.createElement('img');
            img.src = src;
            img.alt = '';
            item.appendChild(img);
        }

        item.addEventListener('click', () => openLightbox(src, isVideo));
        item.addEventListener('keydown', e => {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                openLightbox(src, isVideo);
            }
        });
        return item;
    }

    function openLightbox(src, isVideo) {
        while (lightboxContent.childElementCount > 1) {
            lightboxContent.removeChild(lightboxContent.lastChild);
        }

        if (isVideo) {
            const video = document.createElement('video');
            video.src = src;
            video.controls = true;
            video.autoplay = true;
            video.playsInline = true;
            lightboxContent.appendChild(video);
        } else {
            const img = document.createElement('img');
            img.src = src;
            img.alt = "الصورة مكبرة";
            lightboxContent.appendChild(img);
        }
        lightbox.classList.add('active');
        lightboxContent.focus();
    }

    function closeLightbox() {
        const video = lightboxContent.querySelector('video');
        if (video) {
            video.pause();
        }
        lightbox.classList.remove('active');
    }

    lightboxClose.addEventListener('click', closeLightbox);
    lightbox.addEventListener('click', (e) => {
        if (e.target === lightbox) {
            closeLightbox();
        }
    });
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && lightbox.classList.contains('active')) {
            closeLightbox();
        }
    });

    mp4Files.forEach(src => gallery.appendChild(createGalleryItem(src, true)));
    jpgFiles.forEach(src => gallery.appendChild(createGalleryItem(src, false)));
  }
});
</script>

</body>
</html>
